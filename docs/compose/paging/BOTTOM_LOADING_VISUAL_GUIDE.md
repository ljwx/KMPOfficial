# ğŸ¨ LazyColumn åº•éƒ¨ Loading å›¾è§£

## è§†è§‰åŒ–ç†è§£

### åœºæ™¯ 1: åˆå§‹çŠ¶æ€(å·²åŠ è½½ 20 æ¡æ•°æ®)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LazyColumn                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  items(count = 20) {            â”‚  â† æ•°æ®åŒºåŸŸ
â”‚    Item #1                      â”‚
â”‚    Item #2                      â”‚
â”‚    Item #3                      â”‚
â”‚    ...                          â”‚
â”‚    Item #18                     â”‚
â”‚    Item #19                     â”‚
â”‚    Item #20                     â”‚  â† ç”¨æˆ·çœ‹åˆ°è¿™é‡Œ
â”‚  }                              â”‚
â”‚                                 â”‚
â”‚  when (append) {                â”‚  â† åº•éƒ¨çŠ¶æ€åŒºåŸŸ
â”‚    Loading -> item { ... }     â”‚
â”‚    Error -> item { ... }       â”‚
â”‚    else -> Unit                â”‚  âœ… å½“å‰æ˜¯ NotLoading,ä¸æ˜¾ç¤º
â”‚  }                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**çŠ¶æ€:** `append = NotLoading`  
**æ˜¾ç¤º:** åªæœ‰ 20 æ¡æ•°æ®,åº•éƒ¨ä»€ä¹ˆéƒ½ä¸æ˜¾ç¤º


---

### åœºæ™¯ 2: ç”¨æˆ·æ»šåŠ¨åˆ°åº•éƒ¨,è§¦å‘åŠ è½½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LazyColumn                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  items(count = 20) {            â”‚
â”‚    Item #15                     â”‚
â”‚    Item #16                     â”‚
â”‚    Item #17                     â”‚
â”‚    Item #18                     â”‚
â”‚    Item #19                     â”‚
â”‚    Item #20                     â”‚  â† ç”¨æˆ·æ»šåŠ¨åˆ°è¿™é‡Œ
â”‚  }                              â”‚
â”‚                                 â”‚
â”‚  when (append) {                â”‚
â”‚    Loading -> item {            â”‚  âœ… æ£€æµ‹åˆ° Loading çŠ¶æ€
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚      â”‚  ğŸ”„ åŠ è½½ä¸­...        â”‚   â”‚  â† æ˜¾ç¤ºè¿™ä¸ª item
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚    }                            â”‚
â”‚  }                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**çŠ¶æ€:** `append = Loading`  
**æ˜¾ç¤º:** 20 æ¡æ•°æ® + åº•éƒ¨ Loading indicator  
**Paging åœ¨åšä»€ä¹ˆ:** æ­£åœ¨è°ƒç”¨ `PagingSource.load()` åŠ è½½ç¬¬ 2 é¡µ


---

### åœºæ™¯ 3: åŠ è½½å®Œæˆ,æ–°æ•°æ®æ˜¾ç¤º

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LazyColumn                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  items(count = 40) {            â”‚  â† itemCount ä» 20 å˜æˆ 40
â”‚    Item #15                     â”‚
â”‚    Item #16                     â”‚
â”‚    ...                          â”‚
â”‚    Item #20                     â”‚
â”‚    Item #21  â† æ–°æ•°æ®!          â”‚
â”‚    Item #22  â† æ–°æ•°æ®!          â”‚
â”‚    ...                          â”‚
â”‚    Item #40  â† æ–°æ•°æ®!          â”‚
â”‚  }                              â”‚
â”‚                                 â”‚
â”‚  when (append) {                â”‚
â”‚    Loading -> item { ... }     â”‚
â”‚    else -> Unit                â”‚  âœ… åˆå˜å› NotLoading
â”‚  }                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**çŠ¶æ€:** `append = NotLoading`  
**æ˜¾ç¤º:** 40 æ¡æ•°æ®,Loading æ¶ˆå¤±äº†  
**ç”¨æˆ·ä½“éªŒ:** å¹³æ»‘åœ°çœ‹åˆ°æ–°æ•°æ®å‡ºç°


---

### åœºæ™¯ 4: ç»§ç»­æ»šåŠ¨,åŠ è½½å¤±è´¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LazyColumn                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  items(count = 40) {            â”‚
â”‚    Item #35                     â”‚
â”‚    Item #36                     â”‚
â”‚    Item #37                     â”‚
â”‚    Item #38                     â”‚
â”‚    Item #39                     â”‚
â”‚    Item #40                     â”‚
â”‚  }                              â”‚
â”‚                                 â”‚
â”‚  when (append) {                â”‚
â”‚    Error -> item {              â”‚  âœ… æ£€æµ‹åˆ° Error çŠ¶æ€
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚      â”‚  âŒ åŠ è½½å¤±è´¥         â”‚   â”‚
â”‚      â”‚  [é‡è¯•æŒ‰é’®]          â”‚   â”‚  â† æ˜¾ç¤ºé”™è¯¯å’Œé‡è¯•
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚    }                            â”‚
â”‚  }                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**çŠ¶æ€:** `append = Error`  
**æ˜¾ç¤º:** 40 æ¡æ•°æ® + åº•éƒ¨é”™è¯¯æç¤º  
**ç”¨æˆ·æ“ä½œ:** ç‚¹å‡»é‡è¯•æŒ‰é’® â†’ è°ƒç”¨ `pagingItems.retry()`


---

### åœºæ™¯ 5: æ²¡æœ‰æ›´å¤šæ•°æ®äº†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LazyColumn                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  items(count = 50) {            â”‚
â”‚    Item #45                     â”‚
â”‚    Item #46                     â”‚
â”‚    Item #47                     â”‚
â”‚    Item #48                     â”‚
â”‚    Item #49                     â”‚
â”‚    Item #50  â† æœ€åä¸€æ¡         â”‚
â”‚  }                              â”‚
â”‚                                 â”‚
â”‚  when (append) {                â”‚
â”‚    NotLoading -> {              â”‚
â”‚      if (endOfPaginationReached) { â”‚  âœ… åˆ°è¾¾æœ«å°¾
â”‚        item {                   â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚          â”‚ â€” æ²¡æœ‰æ›´å¤šäº† â€”   â”‚   â”‚  â† æ˜¾ç¤ºç»“æŸæç¤º
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚        }                        â”‚
â”‚      }                          â”‚
â”‚    }                            â”‚
â”‚  }                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**çŠ¶æ€:** `append = NotLoading(endOfPaginationReached = true)`  
**æ˜¾ç¤º:** 50 æ¡æ•°æ® + "æ²¡æœ‰æ›´å¤š"æç¤º  
**Paging è¡Œä¸º:** ä¸å†è§¦å‘åŠ è½½


---

## ä»£ç å¯¹åº”å…³ç³»

### æ•°æ®åŒºåŸŸ
```kotlin
items(count = pagingItems.itemCount) { index ->
    // è¿™éƒ¨åˆ†æ¸²æŸ“æ‰€æœ‰å·²åŠ è½½çš„æ•°æ®
    // itemCount ä¼šéšç€åŠ è½½è‡ªåŠ¨å¢åŠ : 20 â†’ 40 â†’ 60 ...
}
```

### åº•éƒ¨çŠ¶æ€åŒºåŸŸ
```kotlin
when (pagingItems.loadState.append) {
    is LoadState.Loading -> {
        item {
            // åœºæ™¯ 2: æ˜¾ç¤º Loading
            CircularProgressIndicator()
        }
    }
    is LoadState.Error -> {
        item {
            // åœºæ™¯ 4: æ˜¾ç¤ºé”™è¯¯
            Button(onClick = { pagingItems.retry() }) {
                Text("é‡è¯•")
            }
        }
    }
    is LoadState.NotLoading -> {
        if (appendState.endOfPaginationReached) {
            item {
                // åœºæ™¯ 5: æ˜¾ç¤º"æ²¡æœ‰æ›´å¤š"
                Text("æ²¡æœ‰æ›´å¤šæ•°æ®äº†")
            }
        }
        // åœºæ™¯ 1 å’Œ 3: ä¸æ˜¾ç¤ºä»»ä½•ä¸œè¥¿
    }
}
```

---

## å…³é”®ç†è§£ç‚¹

### 1. ä¸ºä»€ä¹ˆåº•éƒ¨çŠ¶æ€è¦æ”¾åœ¨ items() ä¹‹å?

å› ä¸º LazyColumn æ˜¯**ä»ä¸Šåˆ°ä¸‹**æ¸²æŸ“çš„:

```kotlin
LazyColumn {
    item { Text("Header") }        // ç¬¬ 1 ä¸ª item
    items(100) { Text("Data") }    // ç¬¬ 2-101 ä¸ª item
    item { Text("Footer") }        // ç¬¬ 102 ä¸ª item â† è¿™å°±æ˜¯åº•éƒ¨!
}
```

### 2. ä»€ä¹ˆæ—¶å€™è§¦å‘åŠ è½½?

å½“ç”¨æˆ·æ»šåŠ¨åˆ°è·ç¦»åº•éƒ¨ `prefetchDistance` ä¸ª item æ—¶:

```kotlin
PagingConfig(
    pageSize = 20,
    prefetchDistance = 5  // è·ç¦»åº•éƒ¨è¿˜æœ‰ 5 ä¸ª item æ—¶å°±å¼€å§‹åŠ è½½
)
```

**ç¤ºä¾‹:**
- å½“å‰æ˜¾ç¤º Item #15-20
- ç”¨æˆ·æ»šåŠ¨,Item #16 å‡ºç°åœ¨é¡¶éƒ¨
- æ­¤æ—¶è·ç¦»åº•éƒ¨åªæœ‰ 4 ä¸ª item (17, 18, 19, 20)
- è§¦å‘åŠ è½½! (å› ä¸º 4 < 5)

### 3. ä¸ºä»€ä¹ˆä¸éœ€è¦æ‰‹åŠ¨è§¦å‘åŠ è½½?

Paging åº“å†…éƒ¨ä¼š:
1. ç›‘å¬ LazyColumn çš„æ»šåŠ¨ä½ç½®
2. è®¡ç®—è·ç¦»åº•éƒ¨çš„è·ç¦»
3. è‡ªåŠ¨è°ƒç”¨ `PagingSource.load()`
4. æ›´æ–° `loadState.append`

ä½ åªéœ€è¦æ ¹æ®çŠ¶æ€æ˜¾ç¤º UI!

---

## çŠ¶æ€æœºå›¾

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  NotLoading â”‚
                    â”‚ (åˆå§‹çŠ¶æ€)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                   ç”¨æˆ·æ»šåŠ¨åˆ°åº•éƒ¨
                           â”‚
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Loading   â”‚ â† æ˜¾ç¤ºåº•éƒ¨ Loading
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                     â”‚
           åŠ è½½æˆåŠŸ                 åŠ è½½å¤±è´¥
                â”‚                     â”‚
                â–¼                     â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ NotLoading  â”‚       â”‚    Error    â”‚ â† æ˜¾ç¤ºé”™è¯¯å’Œé‡è¯•
         â”‚ (æœ‰æ›´å¤šæ•°æ®) â”‚       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜              â”‚
                â”‚                     â”‚ ç‚¹å‡»é‡è¯•
                â”‚                     â”‚
                â”‚                     â–¼
                â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚              â”‚   Loading   â”‚
                â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
        ç»§ç»­æ»šåŠ¨åˆ°åº•éƒ¨
                â”‚
                â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   Loading   â”‚
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                â”‚
           æ²¡æœ‰æ›´å¤šæ•°æ®
                â”‚
                â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ NotLoading  â”‚ â† æ˜¾ç¤º"æ²¡æœ‰æ›´å¤š"
         â”‚ (åˆ°è¾¾æœ«å°¾)   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æœ€ç®€å•çš„è®°å¿†æ–¹å¼

**ä¸‰å¥è¯æ€»ç»“:**

1. **æ•°æ®åœ¨å‰,çŠ¶æ€åœ¨å** - `items()` æ˜¾ç¤ºæ•°æ®,`when(append)` å¤„ç†åº•éƒ¨çŠ¶æ€
2. **Paging è‡ªåŠ¨åŠ è½½** - ä½ ä¸éœ€è¦æ‰‹åŠ¨è§¦å‘,åªéœ€è¦æ ¹æ®çŠ¶æ€æ˜¾ç¤º UI
3. **ä¸‰ç§çŠ¶æ€,ä¸‰ç§æ˜¾ç¤º** - Loading æ˜¾ç¤ºè¿›åº¦æ¡,Error æ˜¾ç¤ºé‡è¯•,NotLoading ä¸æ˜¾ç¤º(æˆ–æ˜¾ç¤ºç»“æŸ)

**ä»£ç æ¨¡æ¿:**

```kotlin
LazyColumn {
    // 1. æ•°æ®
    items(count = pagingItems.itemCount) { index ->
        ItemView(pagingItems[index])
    }
    
    // 2. åº•éƒ¨çŠ¶æ€
    when (pagingItems.loadState.append) {
        is LoadState.Loading -> item { LoadingView() }
        is LoadState.Error -> item { ErrorView() }
        else -> Unit
    }
}
```

å°±è¿™ä¹ˆç®€å•! ğŸ‰
